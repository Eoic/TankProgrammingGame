<!doctype html>
<html lang="en">
  <head>
    <% include ../partials/styles %>
    <title> Dashboard </title>
  </head>
  <body style="background-color: #1C1F24">
    <% include ../partials/navbar %> 
    <% include ../partials/bootstrapjs %> 

    <div id="sidebarID" class="sidebar bg-dark shader">
        <hr/>
          <h5 class="text-light pt-1 pl-3">
            <img src="../../img/profile.png" class="img-rounded pr-2" style="max-width: 20%; max-height: 20%;"> 
            <%= name %> 
          </h5>
        <hr/>
        <button type="button" class="btn btn-dark btn-lg btn-block rounded-0 mb-0 text-left sidebar-button" onclick="location.reload()"> 
          <i class="fa fa-address-card"></i> Overview 
        </button>
        <button type="button" id="robot-list" class="btn btn-dark btn-lg btn-block rounded-0 mt-0 text-left sidebar-button"> 
          <i class="fa fa-code"></i> Robots 
        </button>
        <button type="button" id="statistics" class="btn btn-dark btn-lg btn-block rounded-0 mt-0 text-left sidebar-button"> 
          <i class="fa fa-bar-chart"></i> Statistics 
        </button>
        <button type="button" id="achievements" class="btn btn-dark btn-lg btn-block rounded-0 mt-0 text-left sidebar-button"> 
          <i class="fa fa-unlock"></i> Achievements 
        </button>
        <button type="button" id="user-settings" class="btn btn-dark btn-lg btn-block rounded-0 mt-0 text-left sidebar-button"> 
          <i class="fa fa-cogs"></i> Settings 
        </button>
    </div>

    <!-- ONLY THIS WRAPPER WILL BE PUSHED BY SIDEBAR -->
    <div id="main">
      <span class="navbar-toggler bars" style="font-size:30px; cursor:pointer" onclick="toggleSidebar()">
        <i class="fa fa-bars"></i>
      </span>

      <!-- Level progression card. -->
      <div class="row">
        <div style="width: 30rem;" class="ml-5 mt-5 mr-5">
          <div class="card bg-dark text-light">
            <div class="card-header"> PROGRESSION </div>
            <div class="card-body">
              <h3 class="card-text pb-3"> LEVEL 1  
                <span style="float: right"> 65 / 100 EXP </span> 
              </h3>
              <div class="progress" style="height: 8px;">
                <div class="progress-bar" role="progressbar" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100" style="width: 65%"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

    <script>
      // Setting previous state.
      switch(localStorage.getItem("sidebarState")){
        case 'open':
            openSidebar();
            break;
        case 'closed' || null:
            closeSidebar();
            break;
      }

      // Toggling current state.
      function toggleSidebar(){
        if(document.getElementById("sidebarID").style.width == "0px")
          openSidebar();
        else
          closeSidebar();
      }

      function openSidebar(){
        document.getElementById("sidebarID").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
        localStorage.setItem("sidebarState", "open");
      }

      function closeSidebar(){
        document.getElementById("sidebarID").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        localStorage.setItem("sidebarState", "closed");
      }

      var $body = $('#main');

      $('#robot-list').click(function(){
        $body.load("/robots");
      });
      
      $('#user-settings').click(function(){
        $body.load('/settings');
      });

      $('#achievements').click(function(){
        $body.load('/achievements');
      });

      $('#statistics').click(function(){
        $body.load('/statistics');
      });

    </script>
   </body>
</html>