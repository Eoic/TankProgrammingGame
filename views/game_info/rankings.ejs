<!doctype html>
<html lang="en">

<head>
    <% include ../partials/styles %>
    <title> Rankings </title>
</head>

<body>
    <% include ../partials/navbar %>

    <div class="w-75 mt-3" style="margin: 0 auto">
        <a href="/rankings" class="text-secondary" style="text-decoration: none;"> Leaderboard </a>
    </div>

    <hr>

    <table class="table table-hover text-center table-bordered">
            <thead class="thead-dark">
                <tr>
                <th scope="col"> #          </th>
                <th scope="col"> USERNAME   </th>
                <th scope="col"> GAMES WON  </th>
                <th scope="col"> GAMES LOST </th>
                <th scope="col"> KILLS      </th>
                <th scope="col"> DEATHS     </th>
                <th scope="col"> K/D RATIO  </th>
                </tr>
            </thead>
            <tbody>
                <% for(var i = 0; i < print.length; i++){ %>
                    <tr>
                        <th scope="row"> <%= Number(i + 1) %> </th>
                        <td>
                            <div class="dropdown open">
                                <p>
                                    <button class="btn btn-info rounded-0" type="button" data-toggle="modal"  data-target=<%= "#" + i %>  aria-controls=<%= i %>>
                                            <%= print[i].Username %>
                                    </button>
                                </p>  
                            </div>   
                            <!-- statistic modal -->
                            <div class="modal fade" id=<%= i %> >
                                    <div class="modal-dialog" role="document">
                                        <table class="table table-striped table-inverse table-bordered">
                                            <thead class="thead-default">
                                                <tr>
                                                    <th scope="col"> #          </th>
                                                    <th scope="col"> NAME       </th>
                                                    <th scope="col"> LEVEL      </th>
                                                    <th scope="col"> KILLS      </th>
                                                    <th scope="col"> DEATHS     </th>
                                                    <th scope="col"> K/D RATIO  </th>
                                                </tr>
                                            </thead>
                                                            
                                            <tbody>
                                                <% var counter = 1 %>
                                                <% for(var j = 0; j < robots.length; j++){ %>
                                                    <% if(robots[j].userId === print[i].userId){ %>
                                                    <tr>
                                                                <td><%= counter++ %>                            </td>
                                                                <td><%= robots[j].name %>                       </td>
                                                                <td><%= robots[j].level %>                      </td>
                                                                <td><%= robots[j].kills %>                      </td>
                                                                <td><%= robots[j].deaths %>                     </td>
                                                                <td><%= robots[j].kills / robots[j].deaths %>   </td>
                                                    </tr>
                                                        <% } %>
                                                <% } %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <!-- -->
                        </td>
                        <td> <%= parseInt(print[i].GamesWon)              %> </td>
                        <td> <%= parseInt(print[i].GamesLost)             %> </td>
                        <td> <%= parseInt(print[i].Kills)                 %> </td>
                        <td> <%= parseInt(print[i].Deaths)                %> </td>
                        <td> <%= Number(print[i].Kills / print[i].Deaths) %> </td>
                    </tr>     
                <% } %>
            </tbody>
        </table>

        <hr>
        
        <% include ../partials/bootstrapjs %>
</body>

</html>